<mvc:View
    controllerName="com.solvia.management.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    displayBlock="true"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:card="sap.f.cards"
    xmlns:viz="sap.viz.ui5.controls"
    xmlns:viz.feeds="sap.viz.ui5.controls.common.feeds"
    xmlns:viz.data="sap.viz.ui5.data"
>
    <Page
        id="idPage"
        title="{i18n>title}"
    >
        <content>
            <HBox height="100%">
                <mvc:View
                    viewName="com.solvia.management.view.Aside"
                    type="XML"
                />
                <VBox>
                    <HBox>
                        <f:Card
                            class="sapUiMediumMargin"
                            width="300px"
                        >
                            <f:header>
                                <card:Header
                                    title="Yeni Ürün"
                                    subtitle="Yeni bir ürün ekleyin"
                                    iconSrc="sap-icon://SAP-icons-TNT/block"
                                />
                            </f:header>
                            <f:content>
                                <VBox
                                    class="mainButton"
                                    height="100%"
                                    width="100%"
                                >
                                    <Button
                                        icon="sap-icon://SAP-icons-TNT/data-output-arrow"
                                        text="Git"
                                        press="onGitButtonProductPress"
                                    />
                                </VBox>
                            </f:content>
                        </f:Card>
                        <f:Card
                            class="sapUiMediumMargin"
                            width="300px"
                        >
                            <f:header>
                                <card:Header
                                    title="Yeni Çalışan"
                                    subtitle="Yeni bir çalışan ekleyin"
                                    iconSrc="sap-icon://employee"
                                />
                            </f:header>
                            <f:content>
                                <VBox
                                    class="mainButton"
                                    height="100%"
                                    width="100%"
                                >
                                    <Button
                                        icon="sap-icon://SAP-icons-TNT/data-output-arrow"
                                        text="Git"
                                        press="onGitButtonEmployeePress"
                                    />
                                </VBox>
                            </f:content>
                        </f:Card>
                    </HBox>
                    <HBox>
                        <f:Card
                            class="sapUiMediumMargin"
                            width="300px"
                        >
                            <f:header>
                                <card:Header
                                    title="Çalışanlarınız"
                                    subtitle="Güncel Çalışan Sayısı: {globalModel>/getEmployeesLength}"
                                />
                            </f:header>
                            <f:content>
                                <VBox>
                                    <List
                                        class="sapUiSmallMarginBottom"
                                        showSeparators="Inner"
                                        items="{ path: 'globalModel>/getEmployeesForMain' }"
                                    >
                                        <CustomListItem>
                                            <HBox
                                                alignItems="Center"
                                                justifyContent="SpaceBetween"
                                            >
                                                <VBox
                                                    class="sapUiSmallMarginBegin sapUiSmallMarginTopBottom"
                                                >
                                                    <HBox>
                                                        <Avatar
                                                            src="{= ${globalModel>Pimage} ? 'data:image/jpeg;base64,' + ${globalModel>Pimage} : ''}"
                                                            class="customMainAvatar"
                                                        />
                                                        <VBox
                                                            class="sapUiSmallMarginBegin"
                                                            alignItems="Center"
                                                            justifyContent="Center"
                                                        >
                                                            <Title
                                                                level="H3"
                                                                text="{globalModel>Name} {globalModel>Surname}"
                                                            />
                                                        </VBox>
                                                    </HBox>
                                                </VBox>
                                            </HBox>
                                        </CustomListItem>
                                    </List>
                                    <VBox
                                        class="mainButton"
                                        height="100%"
                                        width="100%"
                                    >
                                        <Button
                                            icon="sap-icon://SAP-icons-TNT/data-output-arrow"
                                            text="Daha Fazlasını Gör"
                                            press="onDahaFazlasnGrButtonPress"
                                        />
                                    </VBox>
                                </VBox>
                            </f:content>
                        </f:Card>
                        <f:Card
                            class="sapUiMediumMargin"
                            width="300px"
                        >
                            <f:header>
                                <card:Header title="Departman dağılımı" />
                            </f:header>
                            <f:content>
                                <viz:VizFrame
                                    id="idVizFrame"
                                    uiConfig="{applicationSet:'fiori'}"
                                    height='100%'
                                    width="100%"
                                    vizType='donut'
                                >
                                    <viz:dataset>
                                        <viz.data:FlattenedDataset
                                            data="{globalModel>/getAllEmployees}"
                                        >
                                            <viz.data:measures>
                                                <viz.data:MeasureDefinition
                                                    name="Employee Count"
                                                    value="{globalModel>/getEmployeesLength}"
                                                />
                                            </viz.data:measures>
                                        </viz.data:FlattenedDataset>
                                    </viz:dataset>
                                    <viz:feeds>
                                        <viz.feeds:FeedItem
                                            uid="size"
                                            type="Measure"
                                            values="Employee Count"
                                        />
                                        <viz.feeds:FeedItem
                                            uid="color"
                                            type="Dimension"
                                            values="Department"
                                        />
                                    </viz:feeds>
                                    <viz:dependents>
                                        <viz:Popover id="idPopOver" />
                                    </viz:dependents>
                                </viz:VizFrame>
                            </f:content>
                        </f:Card>
                    </HBox>
                </VBox>
            </HBox>
        </content>
    </Page>
</mvc:View>
